# Tealeaf Course 1, Lesson 3: Sinatra Blackjack
Mary Dean
10/30/2014
## Deployed on Heroku
You should be able to run it from this URL:
https://marydean-blackjack.herokuapp.com

CREDITS: all graphics from openclipart.org
## Steep Learning Curve
This lesson took me a solid month and involved a very steep learning curve for me, but it was also fun and I learned a ton. I found it impossible NOT to go "sideways" in this lesson because there was so much new material: Sinatra, ERB, Bootstrap, HTTP, Heroku, TCP/IP, Mechanize, web forms, css. To make it even more challenging, I decided to bite the bullet and learn to use a Mac for the first time in my life. I felt like I was programming with two left hands. The most basic things like saving files, starting programs, finding things, connecting to a network, were difficult and frustrating. I spent an entire day getting RVM working, for example, and another day learning Unix-style terminal commands. But now I have two monitors on my desk and am able to move files between my Windows PC and my Mac, so I feel like a pro. 

Here's a summary of what I learned in this lesson, besides the actual making of the blackjack game:
* I made my very own "web scraper" using the Mechanize gem, based on the Tealeaf 8/16/14 live session recording. I wanted to find different playing card graphics from those provided by the teacher, and I found a bunch at openclipart.org, but I was faced with right-clicking and downloading 52 image files, so it seemed like a good time to learn to use mechanize. My script was sloppy but it got the job done. It was really amazing to see 52 .png files downloaded and renamed in a matter of seconds. So far I think this is the most 'real-world useful' thing I have learned in this class.
* I spent a day trying very hard to use Ruby to resize my playing cards, but all of the gems that do graphics were difficult to use and many were out of date, so I gave up and used a cute little utility called Faststone Image Resizer.
* I spent a day delving into Bootstrap, which was amazingly productive. I tried to use the 'grid system' to make my user interface, and I can't wait to check out Bootstrap version 3, as well as other frameworks.
* I learned how to run sinatra on my home network so I could develop on one machine and test on another. This is how I think I will always work from now on.
* I learned to use the RubyMine IDE. It was expensive, but once I climbed the learning curve I can't imagine going back. Just being able to click on an ```end``` statement and see what ```do``` it belonged to, or click a ```</div>``` and see what ```<div>``` it belonged to, solved a major frustration I had with using Sublime. And being able to press a single button to stop/restart the sinatra server and run the program saved me tons of time (I couldn't use Shotgun because I was running it over a network). Rubymine is also integrated with Github. I haven't figured out the integration with Heroku yet, but I know it can be done. The only frustrating thing is that it won't allow me to run it on both Mac and PC at same time. If I could, it would be perfect, because my goal is to be fluent in both operating systems.
* I spent a lot of time dinking around with HTML and I found the simple act of trying to get things "centered" to be a major source of frustration. I finally got everything centered in their ```<divs>``` on my home network, but now that it is up on Heroku I see that my 'Dealer' and 'Player' graphics have shifted to the left. For godsakes, Internet Lords, just let us say ```align="center"``` and be done with it! Why should aligning buttons be different than aligning images, fields, paragraphs, divs, table text, or whatever?
* I learned to make and use a favicon. When you play my game you should see a little dollar sign in your web browser tab.
* I really don't like the default behavior of html form fields, when you try to enter your name or a bet and you get a dropdown list of your previous entries. I thought this was a feature of the browser, but it turns out you can turn this off by saying ```<input type="text" autocomplete="off"...>```  I think this makes a form look much neater.
* I learned to add a bootstrap 'icon' to a button (the stars on my "Let's Play Blackjack" button). 
* I am still confused, however, about the difference between buttons as links, buttons as parts of forms, and button as an html element of its own. All three of these are buttons I used in my code. I'm not sure if they are interchangeable or how they differ, but they all work. 
```<a class="btn btn-primary btn-large" href="/set_name">```
```<button type="submit" class="btn btn-primary btn-large">```
```<input type="submit" class="btn btn-warning btn-large" value="Play Dealer's Turn">```
* I was forced to finally learn to use binding.pry to debug things, but I still find it difficult to use. 
* I spent an enormous amount of time trying to figure out why my buttons weren't responding to instance variables. It turned out to be the classic beginner mistake of saying ```if @show_hit_stay_buttons=true``` instead of ```if @show_hit_stay_buttons==true```. Unbelievable that I am still making that mistake! Also, in one of my tests to determine the winner I accidentally referred to ```session[:player_hand]``` instead of ```session[:player_cards]``` and spent hours trying to figure out why the game was crashing intermittantly. Pry didn't help. What did help was going back to the old method of showing my arrays and card values on the screen so I could see what was going on. The lesson here is that it's actually faster to rewrite code from scratch rather than copying it from a past project, or better yet, just decide on your terminology and stick to it across projects. 
